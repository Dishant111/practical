import{a as g,b as x,c as D,d as Y}from"./chunk-2IWKX5KY.js";import{C as Q,D as d,E as C,F as I,G as O,H as V,J as a,K as u,L as G,N as j,P as S,R as q,_ as T,c as F,f as h,ga as _,h as w,i as v,j as y,ja as R,k as N,ka as H,l as k,la as A,ma as $,na as P,oa as z,p as l,pa as L,q as p,qa as U,ra as B,sa as J,t as f,ta as K,u as c,ua as W,va as X,w as E,x as o,y as n}from"./chunk-NF5X2F4B.js";function ae(i,e){if(i&1&&(o(0,"tr")(1,"th",6),a(2),n(),o(3,"td"),a(4),n(),o(5,"td"),a(6),n()()),i&2){let m=e.$implicit,t=C();E(t.getStatusclass(m.status)),l(2),u(m.id),l(2),u(t.getQueryName(m.query)),l(2),u(t.getStatusName(m.status))}}var Z=(()=>{let e=class e{constructor(t,r){this.toastr=t,this.customerService=r,this.pagination={totalCount:100,pagesize:10,pageNumber:1,data:[]},this.intervaObservable=F(2e3),this.reloadgridSubscriber=null}ngOnDestroy(){this.unsubscribeReloadgrid()}ngOnInit(){this.loadGrid()}unsubscribeReloadgrid(){this.reloadgridSubscriber&&this.reloadgridSubscriber.unsubscribe()}subscribeReloadGrid(){this.reloadgridSubscriber=this.intervaObservable.subscribe(t=>{this.loadGrid()})}loadGrid(){this.customerService.getUnResulvedTokenList(this.pagination.pageNumber,this.pagination.pagesize).subscribe({next:t=>{this.pagination=t,this.reloadgridSubscriber||this.subscribeReloadGrid()}})}onPagerChanged(t){this.pagination.pageNumber=t,this.loadGrid()}getData(){return this.pagination.data}getQueryName(t){return g.getQueryName(t)}getStatusName(t){return g.getStatusName(t)}getStatusclass(t){switch(t){case 2:return"table-warning";case 3:return"table-success"}return"table-primary"}};e.\u0275fac=function(r){return new(r||e)(p(_),p(x))},e.\u0275cmp=v({type:e,selectors:[["app-home"]],decls:19,vars:2,consts:[[1,"container"],["role","main",1,"pb-3"],[1,"table","table-hover"],["scope","col"],[3,"class",4,"ngFor","ngForOf"],[3,"pagination","pageChanged"],["scope","row"]],template:function(r,s){r&1&&(o(0,"h3"),a(1,"Dash board"),n(),o(2,"div",0)(3,"main",1)(4,"table",2)(5,"thead")(6,"tr")(7,"th",3)(8,"strong"),a(9,"Id"),n()(),o(10,"th",3)(11,"strong"),a(12,"Query Type"),n()(),o(13,"th",3)(14,"strong"),a(15,"Query Status"),n()()()(),o(16,"tbody"),f(17,ae,7,6,"tr",4),n()(),o(18,"app-pagination",5),d("pageChanged",function(ie){return s.onPagerChanged(ie)}),n()()()),r&2&&(l(17),c("ngForOf",s.getData()),l(),c("pagination",s.pagination))},dependencies:[S,D]});let i=e;return i})();var se=["createdModel"];function me(i,e){if(i&1&&(o(0,"option",11),a(1),n()),i&2){let m=e.$implicit;c("ngValue",m.key),l(),G(" ",m.value," ")}}function le(i,e){if(i&1){let m=Q();o(0,"div",12)(1,"h4",13),a(2,"Query no:"),n(),o(3,"button",14),d("click",function(){let s=N(m).$implicit;return k(s.dismiss("Cross click"))}),n()(),o(4,"div",15)(5,"p"),a(6),n()(),o(7,"div",16)(8,"button",17),d("click",function(){let s=N(m).$implicit;return k(s.close("Close click"))}),a(9," Close "),n()()}if(i&2){let m=C();l(6),u(m.createdTokenNo)}}var ee=(()=>{let e=class e{constructor(t,r){this.customerService=t,this.toastr=r,this.modalService=w(X),this.tokenModelForm=new $({queryType:new P(1,R.required)}),this.createdTokenNo=0}getAllQueryName(){return g.getAllQueryName()}submitTokenModel(){this.tokenModelForm.invalid||this.customerService.CreateToken({query:this.tokenModelForm.controls.queryType.value}).subscribe({next:t=>{t.id>0?(this.toastr.success("Query has been raised"),this.createdTokenNo=t.id,this.modalService.open(this.createdModel)):this.toastr.error("unable to raise query")}})}};e.\u0275fac=function(r){return new(r||e)(p(x),p(_))},e.\u0275cmp=v({type:e,selectors:[["app-create"]],viewQuery:function(r,s){if(r&1&&I(se,5),r&2){let b;O(b=V())&&(s.createdModel=b.first)}},decls:14,vars:3,consts:[[1,"container"],[1,"row","justify-content-md-center"],[1,"col-sm-6"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","exampleSelect1",1,"form-label","mt-4"],["formControlName","queryType",1,"form-select"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-group","mt-4"],["type","submit",1,"btn","btn-primary",3,"disabled"],["createdModel",""],[3,"ngValue"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(r,s){r&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),d("ngSubmit",function(){return s.submitTokenModel()}),o(4,"div",4)(5,"label",5),a(6,"Query Type"),n(),o(7,"select",6),f(8,me,2,2,"option",7),n()(),o(9,"div",8)(10,"button",9),a(11," Resolve "),n()()()()()(),f(12,le,10,1,"ng-template",null,10,j)),r&2&&(l(3),c("formGroup",s.tokenModelForm),l(5),c("ngForOf",s.getAllQueryName()),l(2),c("disabled",s.tokenModelForm.invalid))},dependencies:[S,z,J,K,B,H,A,L,U]});let i=e;return i})();var ce=[{path:"",component:Z},{path:"query/token",component:ee}],te=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=y({type:e}),e.\u0275inj=h({imports:[T.forChild(ce),T]});let i=e;return i})();var Ge=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=y({type:e}),e.\u0275inj=h({imports:[q,te,Y,W]});let i=e;return i})();export{Ge as CustomerModule};
